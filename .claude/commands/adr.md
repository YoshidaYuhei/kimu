---
description: IssueからADR（Architecture Decision Record）を作成する
---

IssueからADR（Architecture Decision Record）を作成します。以下の手順に従ってください：

1. **Issue情報の取得**:
   - コマンド引数としてIssue番号が渡された場合は、それを使用
   - 渡されていない場合は、Issue番号を尋ねる
   - `gh issue view [番号]`でIssueの内容を取得
   - Issue情報が取得できない場合は、エラーを表示して終了

2. **設計・実装方針の検討**:
   AskUserQuestionツールを使用して、以下の情報を対話的に収集します：

   - **アーキテクチャアプローチ**: どのようなアーキテクチャパターンを採用するか
   - **技術選択**: 使用する技術、ライブラリ、フレームワーク
   - **実装方針**: 具体的な実装の進め方
   - **代替案**: 検討した他の選択肢とその理由
   - **トレードオフ**: この決定による利点と欠点
   - **影響範囲**: この決定が影響する範囲

   必要に応じて、Issue内容に基づいて質問をカスタマイズしてください。

3. **ADRドキュメントの作成**:
   収集した情報を元に、以下の構造でADRを作成します：

   ```markdown
   # ADR-[番号]: [タイトル]

   ## ステータス
   Proposed / Accepted / Deprecated / Superseded

   ## コンテキスト
   [背景と問題の説明。Issueの内容を含む]

   ## 決定内容
   [採用する設計・実装方針の詳細]

   ## 結果
   ### 利点
   [この決定による利点]

   ### 欠点・トレードオフ
   [この決定による制約やトレードオフ]

   ### 影響範囲
   [この決定が影響するコンポーネントや範囲]

   ## 代替案
   [検討した他の選択肢と採用しなかった理由]

   ## 参照
   - Issue #[番号]
   - [その他の関連リンク]

   ## 履歴
   - [日付]: Proposed
   ```

4. **ADRファイルの保存**:
   - `docs/adr/`ディレクトリが存在しない場合は作成
   - ADR番号は既存のADRファイル数+1で自動採番
   - ファイル名: `docs/adr/NNNN-brief-title.md` (例: `0001-use-postgresql.md`)
   - ファイル作成後、パスをユーザーに表示

5. **エッジケースへの対応**:
   - GitHub CLIが認証されていない場合は、認証を促す
   - `docs/adr/`ディレクトリが存在しない場合は自動作成
   - 既存のADRと番号が重複しないように確認

プロセス全体を通して、ユーザーとの対話を重視し、より良い設計決定ができるようサポートしてください。
